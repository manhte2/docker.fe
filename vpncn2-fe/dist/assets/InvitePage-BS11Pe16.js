import{n as M,h as B,q as g,r as o,w as v,x as j,a as f,B as O,m as $,j as e,D as q,d as b,R as U,T as V,H as Z,y as N,F as Q}from"./index-DCVJyVHf.js";import{I as Y}from"./IconQuesionMarkCircle-Dri560o-.js";const J=()=>{const n=M(),{i18n:L,t:a}=B(),r=g(t=>t.collab),{_id:x}=g(t=>t.auth),[d,w]=o.useState(),[i,C]=o.useState(),[c,k]=o.useState(),[p,I]=o.useState([]),[m,S]=o.useState(),[u,R]=o.useState(),[l,h]=o.useState(""),y=m&&u&&!l?p.filter(t=>v(t.createdAt,m)&&j(t.createdAt,u)):m&&u&&l?p.filter(t=>(t.plan.toLocaleLowerCase().includes(l.toLowerCase())||t.reciveRoseId.email.toLocaleLowerCase().includes(l.toLowerCase())||t.reciveRoseId.username.toLocaleLowerCase().includes(l.toLowerCase())||t.reciveRoseId.phone.toLocaleLowerCase().includes(l.toLowerCase()))&&v(t.createdAt,m)&&j(t.createdAt,u)):l?p.filter(t=>t.plan.toLocaleLowerCase().includes(l.toLowerCase())||t.reciveRoseId.email.toLocaleLowerCase().includes(l.toLowerCase())||t.reciveRoseId.username.toLocaleLowerCase().includes(l.toLowerCase())||t.reciveRoseId.phone.toLocaleLowerCase().includes(l.toLowerCase())):p;o.useEffect(()=>{A()},[x]);const A=async()=>{try{const[t,s,H,T]=await Promise.all([f.get(`/satisfy/${x}`),f.get(`/users/${x}`),f.get("/commisions"),f.get(`/roses?reciveRoseId=${x}`)]);w(t.data),C(s.data),k(H.data),I(T.data)}catch(t){console.log("error - ",t),O.error($.error)}},D=o.useMemo(()=>[{title:()=>e.jsx("p",{className:"text-base font-semibold font-primary"}),dataIndex:"index",key:"index",width:70,render:t=>e.jsx("p",{className:"text-sm font-primary",children:t+1})},{title:e.jsx("p",{className:"font-semibold font-primary",children:a("page.collaborator.field.package")}),dataIndex:"plan",key:"plan",render:t=>e.jsx("p",{className:"text-sm font-primary",children:t})},{title:e.jsx("p",{className:"font-semibold font-primary",children:a("page.collaborator.field.rose_percent")}),dataIndex:"percent",key:"percent",render:t=>e.jsxs("p",{className:"text-sm font-primary",children:[t,"%"]}),sorter:{compare:(t,s)=>t.percent-s.percent,multiple:1}},{title:e.jsx("p",{className:"font-semibold font-primary",children:a("page.collaborator.field.rose")}),key:"recive",render:(t,s)=>e.jsx("p",{className:"text-sm font-primary",children:n(s.recive)}),sorter:{compare:(t,s)=>t.recive-s.recive,multiple:2}},{title:e.jsx("p",{className:"font-semibold font-primary",children:a("page.collaborator.field.user")}),key:"username",render:(t,s)=>e.jsx("p",{className:"text-sm font-primary",children:s.introducedId.username})},{title:e.jsx("p",{className:"font-semibold font-primary",children:a("page.collaborator.field.email")}),key:"email",render:(t,s)=>e.jsx("p",{className:"text-sm font-primary",children:s.introducedId.email})},{title:e.jsx("p",{className:"font-semibold font-primary",children:a("page.collaborator.field.sdt")}),key:"email",render:(t,s)=>e.jsx("p",{className:"text-sm font-primary",children:s.introducedId.phone})},{title:e.jsx("p",{className:"font-semibold font-primary",children:a("page.collaborator.field.created_at")}),dataIndex:"createdAt",key:"createdAt",render:t=>e.jsx("p",{className:"text-sm font-primary",children:q(t)}),sorter:(t,s)=>b(t.createdAt).unix()-b(s.createdAt).unix()}],[L.language,a]),_=t=>{S(t)},P=t=>{R(t)},E=t=>{const s=t.target.value;h(s)},F=a("page.account.info.tooltip",{commision:c==null?void 0:c.value,level1:r.level1,level2:r.level2,level3:r.level3});return e.jsx(U,{rolePage:[2],children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 items-start rounded-xl border-2 border-[#eeeeed]",children:[e.jsxs("div",{className:"flex flex-col items-center flex-1 px-5 py-5 space-y-2 md:py-7 rounded-xl md:space-y-4",children:[e.jsx("p",{className:"text-xl font-medium lg:text-2xl xl:text-4xl",children:(i==null?void 0:i.level)===0?a("page.account.info.level"):a("page.account.info.leveln",{level:i==null?void 0:i.level})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"text-lg",children:a("page.collaborator.satify.level")}),e.jsx(V,{title:F,children:e.jsx("span",{children:e.jsx(Y,{})})})]})]}),e.jsxs("div",{className:"flex flex-col items-center flex-1 px-5 py-5 space-y-2 md:py-7 rounded-xl md:space-y-4",children:[e.jsx("p",{className:"text-xl font-medium lg:text-2xl xl:text-4xl",children:(d==null?void 0:d.numberIntoduce)||0}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("p",{className:"text-lg",children:a("page.collaborator.satify.invite")})})]}),e.jsxs("div",{className:"flex flex-col items-center flex-1 px-5 py-5 space-y-2 md:py-7 rounded-xl md:space-y-4",children:[e.jsxs("p",{className:"text-xl font-medium lg:text-2xl xl:text-4xl",children:[c?c.value:0,"%"]}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("p",{className:"text-lg",children:a("page.collaborator.satify.rose_percent")})})]}),e.jsxs("div",{className:"flex flex-col items-center flex-1 px-5 py-5 space-y-2 md:py-7 rounded-xl md:space-y-4",children:[e.jsx("p",{className:"text-xl font-medium lg:text-2xl xl:text-4xl",children:n(d&&d.rose.length>0?d.rose[0].money:0)}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("p",{className:"text-lg",children:a("page.collaborator.satify.rose")})})]})]}),e.jsxs("div",{className:"font-medium",children:[e.jsx("p",{children:a("page.collaborator.note.content1",{amount:c==null?void 0:c.value})}),e.jsx("p",{children:a("page.collaborator.note.content2",{amount:r.level1,money:n(r.minLevel1)})}),e.jsx("p",{children:a("page.collaborator.note.content3",{amount:r.level2,money:n(r.minLevel2)})}),e.jsx("p",{children:a("page.collaborator.note.content4",{amount:r.level3,money:n(r.minLevel3)})}),e.jsx("p",{className:"text-lg font-medium text-secondary20",children:a("page.collaborator.note.note")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Z,{children:[" ",a("page.collaborator.heading"),":"," ",n(y.map(t=>t.recive).reduce((t,s)=>t+=s,0))]}),e.jsxs("div",{className:"items-center block gap-5 mb-5 space-y-3 md:flex md:space-y-0",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",value:l,onChange:E,className:"focus:border-primary text-black text-sm font-medium placeholder:text-text4 py-[15px] px-[25px] rounded-[10px] border border-solid w-full bg-inherit peer outline-none border-strock",placeholder:a("page.searchPlaceholder")}),l.length>0?e.jsx("span",{className:"absolute -translate-y-1/2 cursor-pointer right-5 top-1/2",onClick:()=>h(""),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 text-icon-color",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"})})}):null]}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx(N,{onChange:_,className:"!focus:border-primary text-black text-sm font-medium placeholder:text-text4 py-[15px] px-[25px] rounded-[10px] border border-solid w-full bg-inherit peer outline-none border-strock",placeholder:"Start date"}),e.jsx(N,{onChange:P,className:"!focus:border-primary text-black text-sm font-medium placeholder:text-text4 py-[15px] px-[25px] rounded-[10px] border border-solid w-full bg-inherit peer outline-none border-strock",placeholder:"End date"})]})]}),e.jsx("div",{className:"rounded-xl border-2 border-[#eeeeed] overflow-hidden",children:e.jsx(Q,{dataSource:y.map((t,s)=>({index:s,...t})),columns:D,scroll:{x:1180}})})]})]})})};export{J as default};
