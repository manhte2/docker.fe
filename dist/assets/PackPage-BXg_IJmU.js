import{j as e,af as w,S,a as y,B as c,l as b,n as A,h as H,r as l,L as B,D as g,d as x,ag as $,R as M,H as j,ah as L,k as N,F as I}from"./index-DCVJyVHf.js";import{C as G}from"./PricingBox-D9VBoPfP.js";import"./Checkbox-CT2LGWNP.js";const q=({className:r=""})=>e.jsx("span",{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:w("size-4",r),children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})})}),D=({className:r=""})=>e.jsx("span",{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:w("size-4",r),children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5V6.75a4.5 4.5 0 1 1 9 0v3.75M3.75 21.75h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H3.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})})}),K=({_id:r,onSuccess:p,enable:a})=>{console.log("enable ~ ",a);const h=async()=>{var d;try{const{isConfirmed:n}=await S.fire({title:`<p class="leading-tight">Bạn có muốn ${a?"disable":"enable"} gói cước này</p>`,icon:"success",showCancelButton:!0,confirmButtonColor:"#1DC071",cancelButtonColor:"#d33",cancelButtonText:"Thoát",confirmButtonText:"Đồng ý"});n&&(await y.patch(`/plans/${r}`,{enable:a?0:1}),p(),c.success("Chỉnh sửa thành công"))}catch(n){b.isAxiosError(n)?c.error((d=n.response)==null?void 0:d.data.message):c.error("Xảy ra lỗi trong quá trình xử lý")}};return e.jsx("button",{className:w("px-2 aspect-square text-xs font-medium text-white rounded-md font-primary",a?"bg-primary20":"bg-error"),onClick:h,children:a?e.jsx(D,{}):e.jsx(q,{})})},Q=()=>{const r=A(),{i18n:p}=H(),[a,h]=l.useState([]),[d,n]=l.useState([]),[o,m]=l.useState([]),[T,k]=l.useState([]),[u,v]=l.useState(""),C=u?a.filter(s=>s.name.toLowerCase().includes(u.toLowerCase())||`${s.bandWidth}gb`.includes(u.toLowerCase())):a;l.useEffect(()=>{f()},[]);const f=async()=>{try{const s=await y.get("/plans");h(s.data.filter(t=>t.status===1).map(t=>({...t,key:t._id}))),n(s.data.filter(t=>t.status===0)),m(s.data.filter(t=>t.status===1&&t.display===1).map(t=>t._id)),k(s.data.filter(t=>t.status===1&&t.display===1).map(t=>t._id))}catch(s){console.log("error - ",s)}},P=async()=>{var s;try{o.length>3?c.warn("Không được chọn quá 3 gói để hiện thị"):(T.forEach(async t=>{!o.some(i=>i===t)&&await y.patch(`/plans/${t}`,{display:0})}),o.forEach(async t=>{await y.patch(`/plans/${t}`,{display:1})}),k(o),c.success("Thành công"))}catch(t){if(b.isAxiosError(t))console.log("error message: ",t),c.error((s=t.response)==null?void 0:s.data.message);else return console.log("unexpected error: ",t),"An unexpected error occurred"}},_=async s=>{var t;try{const{isConfirmed:i}=await S.fire({title:'<p class="leading-tight">Bạn có muốn xóa gói cước này</p>',icon:"success",showCancelButton:!0,confirmButtonColor:"#1DC071",cancelButtonColor:"#d33",cancelButtonText:"Thoát",confirmButtonText:"Đồng ý"});i&&(await y.delete(`/plans/${s}`),f(),c.success("Xóa thành công"))}catch(i){if(b.isAxiosError(i))console.log("error message: ",i),c.error((t=i.response)==null?void 0:t.data.message);else return console.log("unexpected error: ",i),"An unexpected error occurred"}},W=l.useMemo(()=>[{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"STT"}),dataIndex:"index",key:"index",width:70,render:s=>e.jsx("p",{className:"text-sm font-primary",children:s+1})},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Tên gói"}),dataIndex:"name",key:"name",render:(s,t)=>e.jsx(B,{to:`/admin/pack/edit/${t._id}`,className:"text-sm font-medium font-primary text-primary",children:s})},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Giá gói"}),dataIndex:"price",key:"price",render:s=>e.jsx("p",{className:"text-sm font-primary",children:r(s)})},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Lượt mua"}),dataIndex:"numberPurchase",key:"numberPurchase",render:s=>e.jsx("p",{className:"text-sm font-primary",children:s})},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Chu kỳ"}),dataIndex:"type",key:"type",render:s=>e.jsx("p",{className:"text-sm font-primary",children:s})},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Ngày"}),dataIndex:"day",key:"day",render:s=>e.jsxs("p",{className:"text-sm font-primary",children:[s," ngày"]}),sorter:(s,t)=>s.day-t.day},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Bandwidth"}),dataIndex:"bandWidth",key:"bandWidth",render:s=>e.jsxs("p",{className:"text-sm font-primary",children:[s,"GB"]}),sorter:(s,t)=>s.bandWidth-t.bandWidth},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Ngày tạo"}),dataIndex:"createdAt",key:"createdAt",render:s=>e.jsx("p",{className:"text-sm font-primary",children:g(s)}),sorter:(s,t)=>x(s.createdAt).unix()-x(t.createdAt).unix()},{title:()=>e.jsx("p",{className:"font-semibold font-primary"}),key:"action",render:(s,t)=>e.jsx("div",{className:"flex gap-4",children:t.status===1?e.jsxs("div",{className:"flex gap-2",children:[" ",e.jsx(K,{_id:t._id,enable:!!t.enable,onSuccess:f}),e.jsx("button",{className:"px-2 aspect-square text-xs font-medium text-white rounded-md bg-error font-primary",onClick:()=>_(t._id),children:e.jsx($,{className:"w-5 h-5"})})]}):null})}],[p.language,C]),R=l.useMemo(()=>[{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"STT"}),dataIndex:"index",key:"index",width:70,render:s=>e.jsx("p",{className:"text-sm font-primary",children:s+1})},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Tên gói"}),dataIndex:"name",key:"name",render:(s,t)=>e.jsx(B,{to:`/admin/pack/edit/${t._id}`,className:"text-sm font-medium font-primary text-primary",children:s})},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Giá gói"}),dataIndex:"price",key:"price",render:s=>e.jsx("p",{className:"text-sm font-primary",children:r(s)})},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Lượt mua"}),dataIndex:"numberPurchase",key:"numberPurchase",render:s=>e.jsx("p",{className:"text-sm font-primary",children:s})},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Chu kỳ"}),dataIndex:"type",key:"type",render:s=>e.jsx("p",{className:"text-sm font-primary",children:s})},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Ngày"}),dataIndex:"day",key:"day",render:s=>e.jsxs("p",{className:"text-sm font-primary",children:[s," ngày"]}),sorter:(s,t)=>s.day-t.day},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Bandwidth"}),dataIndex:"bandWidth",key:"bandWidth",render:s=>e.jsxs("p",{className:"text-sm font-primary",children:[s,"GB"]}),sorter:(s,t)=>s.bandWidth-t.bandWidth},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Ngày tạo"}),dataIndex:"createdAt",key:"createdAt",render:s=>e.jsx("p",{className:"text-sm font-primary",children:g(s)}),sorter:(s,t)=>x(s.createdAt).unix()-x(t.createdAt).unix()},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Ngày xóa"}),dataIndex:"updatedAt",key:"updatedAt",render:(s,t)=>t.status===0?e.jsx("p",{className:"text-sm font-primary",children:g(s)}):null,sorter:(s,t)=>x(s.createdAt).unix()-x(t.createdAt).unix()}],[]),E={selectedRowKeys:o,onChange:s=>{m(s)}},F=s=>{const t=s.target.value;v(t)};return e.jsx(M,{rolePage:[1],children:e.jsxs("div",{className:"pb-10",children:[e.jsxs("div",{className:"hidden mt-10 space-y-6 lg:block",children:[e.jsx(j,{children:"Gói cước hiển thị trang chủ"}),e.jsx("div",{className:"grid grid-cols-1 gap-10 md:grid-cols-2 lg:grid-cols-3",children:a.map(s=>s.display===1?e.jsx(V,{plan:s},L()):null)})]}),e.jsxs("div",{className:"flex justify-end gap-5 my-10",children:[e.jsx(N,{className:"px-5 text-white bg-primary20",href:"/admin/pack/extend-plan",children:"Quản lý gói cước mở rộng"}),e.jsx(N,{className:"px-5 text-white bg-secondary",href:"/admin/pack/add",children:"Thêm gói cước"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{children:"Danh sách gói cước"})," ",e.jsxs("div",{className:"flex items-center gap-5 pb-5",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",value:u,onChange:F,className:"focus:border-primary text-black text-sm font-medium placeholder:text-text4 py-[15px] px-[25px] rounded-[10px] border border-solid w-full bg-inherit peer outline-none border-strock",placeholder:"Tìm kiếm"}),u.length>0?e.jsx("span",{className:"absolute -translate-y-1/2 cursor-pointer right-5 top-1/2",onClick:()=>v(""),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 text-icon-color",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"})})}):null]}),e.jsx("div",{onClick:()=>P(),children:e.jsx(N,{className:"px-5 text-white bg-slate-400",children:"Apply hiển thị trang chủ"})})]}),e.jsx("div",{className:"rounded-xl border-2 border-[#eeeeed] overflow-hidden",children:e.jsx(I,{dataSource:C.map((s,t)=>({index:t,...s})),columns:W,rowSelection:E,scroll:{x:1120}})})]}),e.jsxs("div",{className:"mt-10 space-y-4",children:[e.jsx(j,{children:"Lịch sử gói cước"})," ",e.jsx("div",{className:"rounded-xl border-2 border-[#eeeeed] overflow-hidden",children:e.jsx(I,{dataSource:d.map((s,t)=>({index:t,...s})),columns:R,scroll:{x:1120}})})]})]})})},V=({plan:r})=>{const p=A(),{name:a,price:h,description:d,type:n,bandWidth:o}=r;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col items-center col-span-1 overflow-hidden shadow-xl rounded-2xl",children:[e.jsx("h4",{className:"px-3 py-2 font-medium rounded-bl-lg rounded-br-lg text-primary bg-primary bg-opacity-5",children:a}),e.jsxs("div",{className:"pt-10 pb-10",children:[e.jsxs("p",{className:"mb-2 text-4xl font-medium text-primary",children:[p(h),e.jsxs("span",{className:"text-xl",children:["/",n.split("_")[0]]})]}),e.jsxs("p",{className:"mt-3 text-3xl font-semibold text-center text-primary",children:[o,"GB"]})]}),e.jsx("div",{className:"w-[80%] mx-auto space-y-5 pb-16 mb-auto",children:d.filter(m=>m.includes("vi_")).map(m=>e.jsx(G,{content:m.replace("vi_","")},L()))}),e.jsx("button",{className:"flex flex-col items-center justify-center w-full gap-2 py-4 bg-primary",children:e.jsx("p",{className:"text-xl font-medium text-white",children:"Đăng ký mua"})})]})})};export{V as PricingItem,Q as default};
