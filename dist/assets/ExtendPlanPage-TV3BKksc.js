import{f as B,g as y,r as a,a as x,i as F,o as W,j as e,aa as i,ab as d,I as h,k as I,B as l,m as N,a8 as z,n as H,h as Z,D as C,d as m,ag as X,ak as Y,R as J,H as E,F as P,C as K,S as Q}from"./index-DCVJyVHf.js";import{C as U}from"./Checkbox-CT2LGWNP.js";const ee=B({level1:y().required("This field is required"),level2:y().required("This field is required"),level3:y().required("This field is required")}).required(),se=()=>{const[c,v]=a.useState();a.useEffect(()=>{b()},[]),a.useEffect(()=>{if(c){const{level1:n,level2:r,level3:f}=c;u("level1",n),u("level2",r),u("level3",f)}},[c]);const b=async()=>{try{const n=await x.get("/rose-extends");v(n.data)}catch(n){console.log("error - ",n)}},{handleSubmit:p,control:o,setValue:u}=F({resolver:W(ee),mode:"onSubmit"}),w=async n=>{try{console.log("data - ",n),await x.post("/rose-extends",n),b(),l.success("Apply thành công")}catch(r){console.log(r),l.error(N.error)}};return e.jsx("form",{className:"",onSubmit:p(w),children:e.jsxs("div",{className:"flex items-end gap-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5 w-full",children:[e.jsxs(i,{children:[e.jsxs(d,{htmlFor:"price",children:["<=","4 tháng(%)*"]}),e.jsx(h,{name:"level1",placeholder:"",control:o,type:"number",min:0})]}),e.jsxs(i,{children:[e.jsx(d,{htmlFor:"price",children:"5-8 tháng(%)*"}),e.jsx(h,{name:"level2",placeholder:"",control:o,type:"number",min:0})]}),e.jsxs(i,{children:[e.jsxs(d,{htmlFor:"price",children:[">=","9 tháng(%)*"]}),e.jsx(h,{name:"level3",placeholder:"",control:o,type:"number",min:0})]})]}),e.jsx(I,{type:"submit",className:"px-5 text-white bg-primary",children:"Apply"})]})})},te=B({name:z().required("This field is required"),price:y().required("This field is required"),bandWidth:y().required("This field is required")}).required(),ne=()=>{const c=H(),{i18n:v}=Z(),[b,p]=a.useState(!1),[o,u]=a.useState([]),[w,n]=a.useState([]),[r,f]=a.useState(),[j,A]=a.useState(""),L=j?o.filter(s=>s.name.toLowerCase().includes(j.toLowerCase())||`${s.bandWidth}gb`.includes(j.toLowerCase())):o,{handleSubmit:D,control:k,reset:T,setValue:g}=F({resolver:W(te),mode:"onSubmit"});a.useEffect(()=>{r?(g("name",r.name),g("price",r.price),g("bandWidth",r.bandWidth)):T()},[T,r,g]);const M=async s=>{try{r?(await x.patch(`/extend-plans/${r._id}`,s),l.success("Sửa thành công"),f(void 0)):(await x.post("/extend-plans",s),l.success("Thêm thành công")),S()}catch(t){console.log(t),l.error(N.error)}finally{$(),T()}};a.useEffect(()=>{S()},[]);const S=async()=>{try{const s=await x.get("/extend-plans");u(s.data.filter(t=>t.status===1)),n(s.data.filter(t=>t.status===0))}catch(s){console.log("error - ",s),l.error(N.error)}},G=async s=>{try{const{isConfirmed:t}=await Q.fire({title:'<p class="leading-tight">Bạn có muốn xóa gói cước mở rộng này</p>',icon:"success",showCancelButton:!0,confirmButtonColor:"#1DC071",cancelButtonColor:"#d33",cancelButtonText:"Thoát",confirmButtonText:"Đồng ý"});t&&(await x.delete(`/extend-plans/${s}`),S(),l.success("Xóa thành công"))}catch(t){console.log("error - ",t),l.error(N.error)}},q=()=>{p(!0)},$=()=>{p(!1)},R=()=>{p(!1)},O=a.useMemo(()=>[{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"STT"}),dataIndex:"index",key:"index",width:70,render:s=>e.jsx("p",{className:"text-sm font-primary",children:s+1})},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Tên gói"}),dataIndex:"name",key:"name",render:s=>e.jsx("p",{className:"text-sm font-primary",children:s})},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Lượt mua"}),dataIndex:"numberPurchase",key:"numberPurchase",render:s=>e.jsx("p",{className:"text-sm font-primary",children:s})},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Giá"}),dataIndex:"price",key:"price",render:s=>e.jsxs("p",{className:"text-sm font-primary",children:[" ",c(s)]}),sorter:{compare:(s,t)=>s.price-t.price,multiple:1}},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Băng thông"}),dataIndex:"bandWidth",key:"bandWidth",render:s=>e.jsxs("p",{className:"text-sm font-primary",children:[s,"GB"]}),sorter:{compare:(s,t)=>s.bandWidth-t.bandWidth,multiple:2}},{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"Ngày tạo"}),dataIndex:"createdAt",key:"createdAt",render:s=>e.jsx("p",{className:"text-sm font-primary",children:C(s)}),sorter:(s,t)=>m(s.createdAt).unix()-m(t.createdAt).unix()},{title:"",dataIndex:"action",key:"action",render:(s,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-2 aspect-square text-sm font-medium text-white rounded-md bg-error font-primary",onClick:()=>G(t._id),children:e.jsx(X,{className:"size-4"})}),e.jsx("button",{className:"px-2 aspect-square text-sm font-medium text-white rounded-md bg-primary font-primary",onClick:()=>{f(t),q()},children:e.jsx(Y,{className:"size-4"})})]})}],[]),V=a.useMemo(()=>[{title:()=>e.jsx("p",{className:"font-semibold font-primary",children:"STT"}),dataIndex:"index",key:"index",width:70,render:s=>e.jsx("p",{className:"text-sm font-primary",children:s+1})},{title:()=>e.jsx("p",{className:"text-base font-semibold font-primary",children:"Tên gói"}),dataIndex:"name",key:"name",render:s=>e.jsx("p",{className:"text-sm font-primary",children:s})},{title:()=>e.jsx("p",{className:"text-base font-semibold font-primary",children:"Lượt mua"}),dataIndex:"numberPurchase",key:"numberPurchase",render:s=>e.jsx("p",{className:"text-sm font-primary",children:s})},{title:()=>e.jsx("p",{className:"text-base font-semibold font-primary",children:"Giá"}),dataIndex:"price",key:"price",render:s=>e.jsxs("p",{className:"text-sm font-primary",children:[" ",c(s)]}),sorter:{compare:(s,t)=>s.price-t.price,multiple:1}},{title:()=>e.jsx("p",{className:"text-base font-semibold font-primary",children:"Băng thông"}),dataIndex:"bandWidth",key:"bandWidth",render:s=>e.jsxs("p",{className:"text-sm font-primary",children:[s,"GB"]}),sorter:{compare:(s,t)=>s.bandWidth-t.bandWidth,multiple:2}},{title:()=>e.jsx("p",{className:"text-base font-semibold font-primary",children:"Ngày tạo"}),dataIndex:"createdAt",key:"createdAt",render:s=>e.jsx("p",{className:"text-sm font-primary",children:C(s)}),sorter:(s,t)=>m(s.createdAt).unix()-m(t.createdAt).unix()},{title:()=>e.jsx("p",{className:"text-base font-semibold font-primary",children:"Ngày xóa"}),dataIndex:"updatedAt",key:"updatedAt",render:s=>e.jsx("p",{className:"text-sm font-primary",children:C(s)}),sorter:(s,t)=>m(s.updatedAt).unix()-m(t.updatedAt).unix()}],[v.language]),_=s=>{const t=s.target.value;A(t)};return e.jsxs(J,{rolePage:[1],children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(se,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(E,{children:"Danh sách gói mở rộng"}),e.jsx("div",{onClick:q,children:e.jsx(I,{className:"px-5 font-semibold text-white bg-primary",children:"Thêm mới"})})]}),e.jsx("div",{className:"flex items-center gap-5",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",value:j,onChange:_,className:"focus:border-primary text-black text-sm font-medium placeholder:text-text4 py-[15px] px-[25px] rounded-[10px] border border-solid w-full bg-inherit peer outline-none border-strock",placeholder:"Tìm kiếm"}),j.length>0?e.jsx("span",{className:"absolute -translate-y-1/2 cursor-pointer right-5 top-1/2",onClick:()=>A(""),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 text-icon-color",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"})})}):null]})}),e.jsx("div",{className:"rounded-xl border-2 border-[#eeeeed] overflow-hidden",children:e.jsx(P,{dataSource:L.map((s,t)=>({index:t,...s})),columns:O,scroll:{x:1120}})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(E,{children:"Lịch sử gói mở rộng"}),e.jsx("div",{className:"rounded-xl border-2 border-[#eeeeed] overflow-hidden",children:e.jsx(P,{dataSource:w.map((s,t)=>({index:t,...s})),columns:V,scroll:{x:1120}})})]})]}),e.jsx(K,{title:"Thêm gói cước mở rộng",open:b,onCancel:()=>{r&&f(void 0),R()},footer:[],children:e.jsxs("form",{className:"space-y-[15px] md:space-y-5",onSubmit:D(M),children:[e.jsxs(i,{children:[e.jsx(d,{htmlFor:"name",children:"Tên gói*"}),e.jsx(h,{name:"name",placeholder:"",control:k})]}),e.jsxs(i,{children:[e.jsx(d,{htmlFor:"bandWidth",children:"Băng thông(GB)*"}),e.jsx(h,{name:"bandWidth",placeholder:"",control:k,type:"number",min:0})]}),e.jsxs(i,{children:[e.jsx(d,{htmlFor:"price",children:"Giá(/tháng)*"}),e.jsx(h,{name:"price",placeholder:"",control:k,type:"number",min:0})]}),e.jsxs(i,{children:[e.jsx(d,{htmlFor:"price",children:"Status*"}),e.jsx(U,{checked:!!(r!=null&&r.status),children:r!=null&&r.status?"Active":"InActive"})]}),e.jsx(I,{type:"submit",className:"w-full text-white bg-primary",children:r?"Chỉnh sửa":"Thêm mới"})]})})]})};export{ne as default};
