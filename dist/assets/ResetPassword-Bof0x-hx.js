import{f as q,a8 as h,ac as u,ad as v,q as E,a9 as S,i as L,r as R,j as e,aa as m,ab as w,I as p,ae as g,k as F,o as A,a as I,B as x,l as V}from"./index-DCVJyVHf.js";import{L as B}from"./LayoutAuthentication-u7fbQ64F.js";const C=q({newPassword:h().required("This field is required"),reNewPassword:h().required("This field is required")}).required(),G=()=>{const{value:o,handleToogleValue:P}=u(),{value:t,handleToogleValue:N}=u(),k=v(),f=new URLSearchParams(k.search).get("token"),{email:n,role:l}=E(r=>r.auth),s=S(),{handleSubmit:j,control:i,setError:b}=L({resolver:A(C),mode:"onSubmit"});R.useEffect(()=>{n&&s(l===1?"/admin/dashboard":"/user/dashboard")},[n,s,l]);const y=async r=>{var d;const{newPassword:c,reNewPassword:T}=r;try{c===T?(await I.patch("/users/reset-password",{token:f,newPassword:c}),x.success("Đặt lại mật khẩu thành công vui lòng đăng nhập lại"),s("/sign-in")):b("reNewPassword",{message:"Xác nhận lại mật khẩu không khớp"})}catch(a){if(V.isAxiosError(a))console.log("error message: ",a),x.error((d=a.response)==null?void 0:d.data.message);else return console.log("unexpected error: ",a),"An unexpected error occurred"}};return e.jsx(B,{heading:"",children:e.jsxs("form",{className:"space-y-[15px] md:space-y-5",onSubmit:j(y),children:[e.jsxs(m,{children:[e.jsx(w,{htmlFor:"newPassword",children:"Mật khẩu mới*"}),e.jsx(p,{type:o?"text":"password",name:"newPassword",control:i,placeholder:"Nhập mật khẩu mới",children:e.jsx(g,{className:"absolute -translate-y-1/2 cursor-pointer right-5 top-1/2",open:o,onClick:P})})]}),e.jsxs(m,{children:[e.jsx(w,{htmlFor:"reNewPassword",children:"Mật khẩu mới*"}),e.jsx(p,{type:t?"text":"password",name:"reNewPassword",placeholder:"Xác nhận lại mật khẩu",control:i,children:e.jsx(g,{className:"absolute -translate-y-1/2 cursor-pointer right-5 top-1/2",open:t,onClick:N})})]}),e.jsx(F,{type:"submit",className:"w-full text-white bg-primary",children:"Đặt lại mật khẩu"})]})})};export{G as default};
