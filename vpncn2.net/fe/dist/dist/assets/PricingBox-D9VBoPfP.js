import{n as k,h as B,r as _,q as C,a9 as I,j as e,ah as c,z as T,S as $,aE as E,a as F,B as o,l as G}from"./index-DCVJyVHf.js";import{I as P}from"./Checkbox-CT2LGWNP.js";const L=({plan:l,onSuccess:d})=>{const u=k(),{t:n,i18n:s}=B(),[b,g]=_.useState(!1),{_id:v}=C(a=>a.auth),x=I(),{name:m,price:h,description:i,type:r,bandWidth:f}=l,N=async a=>{var y,j;if(a)try{const{isConfirmed:t}=await $.fire({title:`<p class="leading-tight">${n("page.package.swal.title")} <span class="text-secondary20">${m}</span></p>`,text:`${f}GB - ${u(h)}/${E(r,s.language)}`,icon:"success",showCancelButton:!0,confirmButtonColor:"#1DC071",cancelButtonColor:"#d33",cancelButtonText:n("page.package.swal.cancelButton"),confirmButtonText:n("page.package.swal.confirmButton")});if(t){g(!0);const w=await F.post("/gists",{userId:a,planId:l._id});console.log("result ~ ",w.data.data),o.success(n("page.package.swal.success")),d&&d(w.data.data)}}catch(t){if(G.isAxiosError(t))((y=t.response)==null?void 0:y.data.message)==="Bạn không đủ tiền để đăng kí dịch vụ này"&&t.response.status===400&&(o.warn(n("page.package.swal.warn")),x("/user/dashboard")),((j=t.response)==null?void 0:j.data.message)==="Bạn đã đăng kí gói dùng thử."&&t.response.status===400&&o.warn(s.language==="vi"?"Gói dùng thử chỉ được mua 1 lần.":s.language==="en"?"Trial only buy once.":"试用只会买一次");else return console.log("unexpected error: ",t),"An unexpected error occurred"}finally{g(!1)}else x("/sign-in")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-1 shadow-xl flex flex-col items-center rounded-2xl overflow-hidden",children:[e.jsx("h4",{className:"font-medium text-primary bg-primary bg-opacity-5 px-3 py-2 rounded-br-lg rounded-bl-lg",children:m}),e.jsxs("div",{className:"pb-10 pt-10",children:[e.jsxs("p",{className:"text-primary text-3xl font-medium mb-2",children:[u(h),"/",s.language==="vi"&&r.split("_")[0],s.language==="en"&&r.split("_")[1],s.language==="ci"&&r.split("_")[2]]}),e.jsxs("p",{className:"font-semibold text-center text-primary text-3xl mt-3",children:[f,"GB"]})]}),e.jsxs("div",{className:"w-[80%] mx-auto space-y-5 pb-16 mb-auto",children:[s.language==="ci"&&i.filter(a=>a.includes("ci_")).map(a=>e.jsx(p,{content:a.replace("ci_","")},c())),s.language==="en"&&i.filter(a=>a.includes("en_")).map(a=>e.jsx(p,{content:a.replace("en_","")},c())),s.language==="vi"&&i.filter(a=>a.includes("vi_")).map(a=>e.jsx(p,{content:a.replace("vi_","")},c()))]}),e.jsx("button",{className:"flex items-center justify-center bg-primary w-full py-4 flex-col gap-2",onClick:()=>N(v),children:e.jsx("p",{className:"font-medium text-white text-xl",children:n("page.package.buyNow")})})]}),b?e.jsx(T,{}):null]})},p=({content:l})=>{if(l)return e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-primary flex items-center justify-center translate-y-[2px] shrink-0",children:e.jsx("span",{className:"text-white",children:e.jsx(P,{})})}),e.jsx("p",{className:"",children:l})]})};export{p as C,L as P};
