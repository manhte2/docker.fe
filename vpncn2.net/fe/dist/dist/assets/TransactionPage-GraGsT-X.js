import{n as P,h as S,r as n,q as D,w as m,x as u,j as t,D as E,d as f,R,H as T,y as h,F as _,a as F,B,m as H}from"./index-DCVJyVHf.js";const O=()=>{const c=P(),{t:s,i18n:y}=S(),[r,i]=n.useState(""),[g,p]=n.useState(!1),{_id:j}=D(e=>e.auth),[o,b]=n.useState([]),[l,N]=n.useState(),[d,w]=n.useState(),I=l&&d&&!r?o.filter(e=>m(e.createdAt,l)&&u(e.createdAt,d)):l&&d&&r?o.filter(e=>{var a;return((e==null?void 0:e.planId)&&e.planId.name.toLowerCase().includes(r.toLowerCase())||(e==null?void 0:e.extendPlanId)&&((a=e.extendPlanId)==null?void 0:a.name.toLocaleLowerCase().includes(r.toLowerCase())))&&m(e.createdAt,l)&&u(e.createdAt,d)}):r?o.filter(e=>{var a;return e!=null&&e.planId?e.planId.name.toLowerCase().includes(r.toLowerCase()):(a=e.extendPlanId)==null?void 0:a.name.toLocaleLowerCase().includes(r.toLowerCase())}):o,k=async()=>{try{p(!0);const e=await F.get(`/transactions?userId=${j}&approve=true`);b(e.data)}catch{B.error(H.error)}finally{p(!1)}};n.useEffect(()=>{k()},[]);const C=n.useMemo(()=>[{title:()=>t.jsx("p",{className:"text-base font-semibold font-primary"}),dataIndex:"index",key:"index",width:70,render:e=>t.jsx("p",{className:"text-sm font-primary",children:e+1})},{title:()=>t.jsx("p",{className:"font-semibold font-primary",children:s("page.transaction.field.code")}),dataIndex:"code",key:"code",render:e=>t.jsx("p",{className:"text-sm font-primary",children:e})},{title:t.jsx("p",{className:"font-semibold font-primary",children:s("page.transaction.field.package")}),dataIndex:"name",key:"name",render:(e,a)=>{var x;return t.jsx("p",{className:"text-sm font-primary",children:a.extendPlanId?a.extendPlanId.name:(x=a.planId)==null?void 0:x.name})}},{title:t.jsx("p",{className:"font-semibold font-primary",children:s("page.transaction.field.pricePackage")}),dataIndex:"price",key:"price",render:(e,a)=>t.jsx("p",{className:"text-sm font-primary",children:c(a.money/((100-a.discount)/100))}),sorter:{compare:(e,a)=>e.money/((100-e.discount)/100)-a.money/((100-a.discount)/100),multiple:3}},{title:t.jsx("p",{className:"font-semibold font-primary",children:s("page.transaction.field.discount")}),dataIndex:"discount",key:"discount",render:(e,a)=>t.jsxs("p",{className:"text-sm font-primary",children:[a.discount,"%"]}),sorter:{compare:(e,a)=>e.discount-a.discount,multiple:2}},{title:t.jsx("p",{className:"font-semibold font-primary",children:s("page.transaction.field.disCountPrice")}),dataIndex:"money",key:"money",render:(e,a)=>t.jsx("p",{className:"text-sm font-primary",children:c(a.money)}),sorter:{compare:(e,a)=>e.money-a.money,multiple:1}},{title:t.jsx("p",{className:"font-semibold font-primary",children:s("page.transaction.field.createdAt")}),dataIndex:"createdAt",key:"createdAt",render:e=>t.jsx("p",{className:"text-sm font-primary",children:E(e)}),sorter:(e,a)=>f(e.createdAt).unix()-f(a.createdAt).unix()}],[s,y.language]),v=e=>{const a=e.target.value;i(a)},L=e=>{N(e)},A=e=>{w(e)};return t.jsx(R,{rolePage:[2],children:t.jsxs("div",{className:"space-y-6",children:[t.jsx(T,{children:s("page.transaction.heading")}),t.jsxs("p",{className:"text-base font-semibold",children:[s("page.transaction.total"),":"," ",t.jsx("span",{className:"text-lg",children:c(o.map(e=>e.money).reduce((e,a)=>e+=a,0))})]}),t.jsxs("div",{className:"items-center block gap-5 space-y-3 md:flex md:space-y-0",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx("input",{type:"text",value:r,onChange:v,className:"focus:border-primary text-black text-sm font-medium placeholder:text-text4 py-[15px] px-[25px] rounded-[10px] border border-solid w-full bg-inherit peer outline-none border-strock",placeholder:s("page.searchPlaceholder")}),r.length>0?t.jsx("span",{className:"absolute -translate-y-1/2 cursor-pointer right-5 top-1/2",onClick:()=>i(""),children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 text-icon-color",children:t.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"})})}):null]}),t.jsxs("div",{className:"flex items-center gap-5",children:[t.jsx(h,{onChange:L,className:"!focus:border-primary text-black text-sm font-medium placeholder:text-text4 py-[15px] px-[25px] rounded-[10px] border border-solid w-full bg-inherit peer outline-none border-strock",placeholder:"Start date"}),t.jsx(h,{onChange:A,className:"!focus:border-primary text-black text-sm font-medium placeholder:text-text4 py-[15px] px-[25px] rounded-[10px] border border-solid w-full bg-inherit peer outline-none border-strock",placeholder:"End date"})]})]}),t.jsx("div",{className:"rounded-xl border-2 border-[#eeeeed] overflow-hidden",children:t.jsx(_,{dataSource:I.map((e,a)=>({index:a,...e})),columns:C,loading:g,scroll:{x:1180}})})]})})};export{O as default};
