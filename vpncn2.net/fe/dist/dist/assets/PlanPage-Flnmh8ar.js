import{h as P,r as l,a as o,j as e,R as C,ah as D,C as E,D as m,T as S,c as v,A,B as p,m as I}from"./index-DCVJyVHf.js";import{P as R}from"./PricingBox-D9VBoPfP.js";import{E as T}from"./EditKeyNameForm-mZlBQC9A.js";import"./Checkbox-CT2LGWNP.js";const q=()=>{const{t:c}=P(),[r,x]=l.useState([]),[h,d]=l.useState(!1),[s,i]=l.useState();l.useEffect(()=>{(async()=>{try{const a=await o.get("/plans");x(a.data.filter(t=>t.status===1).sort((t,n)=>n.numberPurchase-t.numberPurchase))}catch{}})()},[]);const u=a=>{const{_id:t,planId:{name:n,day:g,bandWidth:y},keyId:{startDate:b,endDate:k,awsId:{fileName:M}},extension:w}=a;i({_id:t,bandWidth:y,day:g,endDate:k,extension:w,fileName:M,planName:n,startDate:b}),j()},f=async(a,t)=>{try{await o.patch(`/gists/extension/${a}`,{extension:t}),i(n=>n?{...n,extension:t}:void 0),p.success("Success")}catch{p.error(I.error)}},j=()=>{d(!0)},N=()=>{d(!1),i(void 0)};if(r.length>0)return e.jsxs(C,{rolePage:[2],children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-9 w-full px-5",children:r.filter(a=>a.enable===1).map(a=>e.jsx(R,{plan:a,onSuccess:u},D()))}),e.jsx(E,{open:h,onCancel:N,footer:[],centered:!0,children:s&&e.jsxs("div",{className:"pt-5 font-primary",children:[e.jsx("p",{className:"text-center font-medium text-xl w-3/4 mx-auto",children:c("packModal.heading",{planName:s.planName})}),e.jsxs("div",{className:"space-y-2 pt-5",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:c("packModal.date",{bandWidth:s.bandWidth,day:s.day})})," ",e.jsxs("span",{children:[e.jsx("span",{className:"text-secondary",children:m(s.startDate)})," ","-"," ",e.jsx("span",{className:"text-secondary",children:m(s.endDate)})]})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("div",{className:"font-medium",children:[" ",c("packModal.keyName"),":"]})," ",e.jsx(T,{placeholder:s.extension,handleRenameKey:a=>f(s._id,a),className:"w-full flex-1",inputClassName:"!text-secondary"})]}),e.jsxs("p",{className:"font-medium flex items-center gap-1",children:["Click"," ",e.jsx("span",{children:e.jsx(S,{title:"Copy key",children:e.jsx("button",{className:"text-white px-2 w-fit aspect-square rounded-md bg-secondary20",onClick:()=>v(`${s.fileName.replace(/https/g,"ssconf")}#${s.extension}`),children:e.jsx(A,{})})})})," ",c("packModal.click")]}),e.jsxs("p",{className:"",children:["[",s.fileName.replace(/https/g,"ssconf"),"#$",s.extension,"]"]})]})]})})]})};export{q as default};
